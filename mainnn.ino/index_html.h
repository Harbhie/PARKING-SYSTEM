// index_html.h
#pragma once
#include <pgmspace.h>
const char index_html[] PROGMEM = R"rawliteral(<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Futuristic Parking Dashboard</title><style>:root{--bg1:#021025;--bg2:#04102b;--panel:rgba(255,255,255,0.04);--accent:#56f0ff;--accent2:#8a57ff;--danger:#ff6b6b;--glass:rgba(255,255,255,0.03);--neon:0 0 18px rgba(86,240,255,0.12),0 0 6px rgba(138,87,255,0.08);font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial}html,body{height:100%;margin:0;background:linear-gradient(160deg,var(--bg1),var(--bg2));color:#d7eef7}.wrap{display:flex;gap:20px;align-items:flex-start;justify-content:center;padding:36px}.card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);border-radius:14px;padding:18px;box-shadow:var(--neon)}.controls{width:340px;display:flex;flex-direction:column;gap:14px}.header{display:flex;align-items:center;gap:12px}.logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;color:#001}h1{font-size:18px;margin:0}.sub{font-size:12px;color:rgba(215,238,247,0.7)}.panel{padding:14px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.02)}.gate-visual{height:140px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.gate-base{width:220px;height:10px;background:linear-gradient(90deg,#0b2a3f,#082033);border-radius:6px;position:relative}.gate-arm{position:absolute;left:110px;bottom:40px;width:6px;height:120px;background:linear-gradient(180deg,var(--accent),var(--accent2));transform-origin:bottom center;border-radius:3px;box-shadow:0 0 30px rgba(86,240,255,0.18)}.status-row{display:flex;align-items:center;justify-content:space-between;gap:8px}.big-count{font-size:34px;font-weight:700}.small{font-size:12px;color:rgba(215,238,247,0.75)}.toggle{display:flex;gap:8px;align-items:center}.btn{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#002;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit}.grid-card{flex:1;min-width:540px}.grid{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}.slot{height:84px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.016),rgba(255,255,255,0.01));display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border:1px solid rgba(255,255,255,0.02)}.slot:hover{transform:translateY(-4px);transition:transform .18s}.slot .id{font-weight:700}.slot .state{font-size:12px;color:rgba(215,238,247,0.7)}.slot.open{box-shadow:0 6px 20px rgba(86,240,255,0.06);border-color:rgba(86,240,255,0.22)}.slot.occupied{background:linear-gradient(180deg,rgba(255,107,107,0.06),rgba(255,107,107,0.02));border-color:rgba(255,107,107,0.12)}.controls .row{display:flex;gap:8px;align-items:center;justify-content:space-between}.meter{height:10px;background:rgba(255,255,255,0.04);border-radius:999px;overflow:hidden}.meter>i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));width:30%}.footer-note{font-size:12px;color:rgba(215,238,247,0.6);text-align:center}@media(max-width:980px){.wrap{flex-direction:column;align-items:stretch;padding:18px}.grid-card{min-width:unset}}</style></head><body><div class="wrap"><div class="controls card"><div class="header"><div class="logo">P</div><div><h1>NeonPark — Control Center</h1><div class="sub">Monitor slots • Open/close gate • Simulated remote</div></div></div><div class="panel"><div class="gate-visual"><div class="gate-base"></div><div id="gateArm" class="gate-arm"></div></div><div style="display:flex;gap:12px;margin-top:10px;align-items:center;justify-content:space-between"><div><div class="small">Gate</div><div id="gateStatus" class="big-count">Closed</div></div><div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end"><div class="toggle"><button id="btnOpen" class="btn">Open</button><button id="btnClose" class="btn ghost">Close</button></div><div style="font-size:12px;color:rgba(215,238,247,0.7)">Last action: <span id="lastAction">—</span></div></div></div></div><div class="panel"><div class="row" style="align-items:center"><div><div class="small">Filled</div><div id="filledCount" class="big-count">0</div></div><div style="flex:1;margin-left:12px"><div class="small">Usage</div><div class="meter" style="margin-top:8px"><i id="meterFill"></i></div></div></div><div style="display:flex;gap:8px;margin-top:12px"><button id="btnAuto" class="btn ghost">Auto-simulate</button><button id="btnReset" class="btn ghost">Reset</button></div></div><div class="footer-note">Tip: Click a slot to toggle occupied/empty status.</div></div><div class="grid-card card"><div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px"><div><h2 style="margin:0">Parking Slots</h2><div class="sub">Interactive map — 6 columns</div></div><div class="sub">Total slots: <strong id="totalSlots">0</strong></div></div><div id="slotGrid" class="grid"></div></div></div><script>/* websocket connect + UI logic (minified) */const WS_URL="ws://192.168.4.1:81/";let ws;function connectWS(){try{ws=new WebSocket(WS_URL);}catch(e){console.log("WS init fail",e);return}ws.onopen=()=>{console.log("WS open");setLastAction("Connected to gate");};ws.onclose=()=>{console.log("WS closed");setLastAction("Disconnected from gate");setTimeout(connectWS,1500);} ;ws.onerror=(e)=>console.log("WS error",e);ws.onmessage=(m)=>{console.log("WS msg",m.data);if(m.data==="open"){state.gateOpen=true;renderGate();setLastAction("Gate opened (ESP32)");saveState(state);}if(m.data==="close"){state.gateOpen=false;renderGate();setLastAction("Gate closed (ESP32)");saveState(state);}}}/* state + UI */const STORAGE_KEY="neonpark_state_v1";const defaultState=()=>({gateOpen:false,lastAction:null,slots:Array.from({length:18}).map((_,i)=>({id:i+1,occupied:Math.random()<0.28}))});function loadState(){try{const r=localStorage.getItem(STORAGE_KEY);return r?JSON.parse(r):defaultState()}catch(e){return defaultState()}}function saveState(s){localStorage.setItem(STORAGE_KEY,JSON.stringify(s))}const gateArm=document.getElementById("gateArm"),gateStatus=document.getElementById("gateStatus"),btnOpen=document.getElementById("btnOpen"),btnClose=document.getElementById("btnClose"),lastActionEl=document.getElementById("lastAction"),slotGrid=document.getElementById("slotGrid"),filledCount=document.getElementById("filledCount"),totalSlotsEl=document.getElementById("totalSlots"),meterFill=document.getElementById("meterFill"),btnAuto=document.getElementById("btnAuto"),btnReset=document.getElementById("btnReset");let state=loadState();function renderGate(){gateArm.style.transform=state.gateOpen?'rotate(-65deg)':'rotate(0deg)';gateStatus.textContent=state.gateOpen?'Open':'Closed';gateStatus.style.color=state.gateOpen?'var(--accent)':'rgba(215,238,247,0.9)'}function renderSlots(){slotGrid.innerHTML="";state.slots.forEach(s=>{const d=document.createElement("div");d.className="slot "+(s.occupied?"occupied":"open");d.innerHTML=`<div class="id">#${s.id}</div><div class="state">${s.occupied?'Occupied':'Empty'}</div>`;d.onclick=()=>toggleSlot(s.id);slotGrid.appendChild(d)});const filled=state.slots.filter(s=>s.occupied).length;filledCount.textContent=filled;totalSlotsEl.textContent=state.slots.length;meterFill.style.width=Math.round(100*filled/state.slots.length)+'%'}function setLastAction(t){state.lastAction=t;lastActionEl.textContent=t;saveState(state)}function openGate(){if(ws&&ws.readyState===WebSocket.OPEN){ws.send("open");setLastAction("Requested OPEN (Web)")}else{setLastAction("Not connected to gate");alert("Not connected to gate. Connect to ParkingGate_AP and open http://192.168.4.1/")}}function closeGate(){if(ws&&ws.readyState===WebSocket.OPEN){ws.send("close");setLastAction("Requested CLOSE (Web)")}else{setLastAction("Not connected to gate");alert("Not connected to gate. Connect to ParkingGate_AP and open http://192.168.4.1/")}}function toggleSlot(id){const s=state.slots.find(x=>x.id===id);if(!s)return;s.occupied=!s.occupied;renderSlots();saveState(state);setLastAction(`Slot #${id} ${s.occupied?'occupied':'emptied'}`)}let autoInterval=null;function startAuto(){if(autoInterval){clearInterval(autoInterval);autoInterval=null;btnAuto.textContent="Auto-simulate";return}btnAuto.textContent="Stop simulation";autoInterval=setInterval(()=>{const empty=state.slots.filter(s=>!s.occupied),filled=state.slots.filter(s=>s.occupied);if(Math.random()<0.6&&empty.length>0){toggleSlot(empty[Math.floor(Math.random()*empty.length)].id)}else if(filled.length>0){toggleSlot(filled[Math.floor(Math.random()*filled.length)].id)}},1500+Math.random()*2000)}btnOpen.addEventListener("click",openGate);btnClose.addEventListener("click",closeGate);btnAuto.addEventListener("click",startAuto);btnReset.addEventListener("click",()=>{if(!confirm("Reset dashboard?"))return;state=defaultState();renderAll();saveState(state);setLastAction("Dashboard reset")});function renderAll(){renderGate();renderSlots()}renderAll();if(state.lastAction)lastActionEl.textContent=state.lastAction;connectWS();window.addEventListener("keydown",e=>{if(e.key==="o")openGate();if(e.key==="c")closeGate();if(e.key==="r")if(confirm("Reset dashboard?")){state=defaultState();renderAll();saveState(state);setLastAction("Dashboard reset")}});</script></body></html>)rawliteral";
